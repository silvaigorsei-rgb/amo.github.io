<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Itachi Eclipse â¤ï¸</title>

<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  background:black;
  font-family:Arial, sans-serif;
  color:white;
}

canvas{
  position:fixed;
  inset:0;
  display:block;
  pointer-events:none;
}

#opening{
  position:fixed;
  inset:0;
  background:black;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  z-index:50;
  animation:fadeOut 3s forwards;
  animation-delay:4s;
}

#opening h1{
  font-size:42px;
  color:#ff2e2e;
  text-shadow:0 0 30px red;
  animation:slideIn 2s ease-out;
}

#opening p{
  opacity:.7;
}

@keyframes slideIn{
  from{transform:translateY(40px);opacity:0}
  to{transform:translateY(0);opacity:1}
}
@keyframes fadeOut{
  to{opacity:0;pointer-events:none}
}

#final{
  position:fixed;
  inset:0;
  background:black;
  display:none;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  z-index:60;
  animation:fadeIn 3s forwards;
}

@keyframes fadeIn{
  from{opacity:0}
  to{opacity:1}
}

#final h1{
  color:#ff2e2e;
  text-shadow:0 0 25px red;
}

#beijo{
  font-size:90px;
  animation:pulse 1s infinite alternate;
}
@keyframes pulse{
  to{transform:scale(1.3)}
}
</style>
</head>
<body>

<div id="opening">
  <h1>ğŸŒ‘ ITACHI ECLIPSE ğŸŒ‘</h1>
  <p>um amor alÃ©m do genjutsu</p>
</div>

<div id="final">
  <h1>ğŸ’Œ FINAL ETERNO ğŸ’Œ</h1>
  <div id="beijo">ğŸ’‹</div>
  <p>Mesmo no escuroâ€¦ eu sempre escolhi vocÃª.</p>
</div>

<canvas id="c"></canvas>

<audio id="music" loop>
  <source src="https://cdn.pixabay.com/audio/2022/10/30/audio_8c3b1d9b6c.mp3">
</audio>
<audio id="finalMusic" loop>
  <source src="https://cdn.pixabay.com/audio/2023/03/13/audio_38c8c9efc3.mp3">
</audio>

<script>
const c=document.getElementById("c"),ctx=c.getContext("2d");
const music=document.getElementById("music");
const finalMusic=document.getElementById("finalMusic");
const final=document.getElementById("final");

function resize(){c.width=innerWidth;c.height=innerHeight}
resize();addEventListener("resize",resize);

// autoplay
addEventListener("pointerdown",()=>music.play().catch(()=>{}),{once:true});

// estado
let angle=0,ativado=false,amaterasuPower=0,cliques=0;
let mouse={x:innerWidth/2,y:innerHeight/2};

// mouse/touch
addEventListener("pointermove",e=>{
  mouse.x=e.clientX;
  mouse.y=e.clientY;
});

// ğŸ¦ corvos
class Crow{
  constructor(){
    this.x=-50;
    this.y=Math.random()*c.height;
    this.v=2+Math.random()*2;
    this.life=120;
  }
  update(){
    this.x+=this.v;
    this.life--;
    ctx.fillStyle="rgba(0,0,0,.8)";
    ctx.beginPath();
    ctx.moveTo(this.x,this.y);
    ctx.lineTo(this.x+20,this.y+10);
    ctx.lineTo(this.x+40,this.y);
    ctx.fill();
    if(this.life<=0) explode(this.x,this.y);
  }
}

// partÃ­culas
const particles=[];
function explode(x,y){
  for(let i=0;i<15;i++){
    particles.push({
      x,y,
      vx:(Math.random()-.5)*4,
      vy:(Math.random()-.5)*4,
      life:40
    });
  }
}

// partÃ­culas update
function updateParticles(){
  particles.forEach((p,i)=>{
    p.x+=p.vx;
    p.y+=p.vy;
    p.life--;
    ctx.fillStyle="rgba(255,0,0,.5)";
    ctx.fillRect(p.x,p.y,2,2);
    if(p.life<=0) particles.splice(i,1);
  });
}

const crows=[...Array(8)].map(()=>new Crow());

// ğŸ‘ï¸ MangekyÅ Itachi
function mangekyo(){
  const cx=c.width/2,cy=c.height/2;
  angle+=0.02;
  ctx.save();
  ctx.translate(cx,cy);
  ctx.rotate(angle);
  ctx.strokeStyle="red";
  ctx.lineWidth=12;
  ctx.beginPath();
  ctx.arc(0,0,130,0,Math.PI*2);
  ctx.stroke();

  for(let i=0;i<3;i++){
    ctx.rotate((Math.PI*2)/3);
    ctx.beginPath();
    ctx.arc(0,-90,22,0,Math.PI*2);
    ctx.fillStyle="red";
    ctx.fill();
  }
  ctx.restore();
}

// ğŸ”¥ Amaterasu total
function amaterasu(){
  amaterasuPower=Math.min(amaterasuPower+0.01,0.9);
  ctx.fillStyle=`rgba(0,0,0,${amaterasuPower})`;
  ctx.fillRect(0,0,c.width,c.height);
}

// clique
addEventListener("pointerdown",()=>{
  cliques++;
  if(cliques>5) ativado=true;
  if(cliques>15){
    music.pause();
    finalMusic.play();
    final.style.display="flex";
  }
});

// loop
function animate(){
  ctx.clearRect(0,0,c.width,c.height);

  // fundo
  ctx.fillStyle="rgba(0,0,0,.25)";
  ctx.fillRect(0,0,c.width,c.height);

  crows.forEach(c=>c.update());
  updateParticles();

  if(ativado){
    mangekyo();
    amaterasu();
  }

  requestAnimationFrame(animate);
}
animate();
</script>
</body>
</html>
